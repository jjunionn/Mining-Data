import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.neighbors import KNeighborsClassifier
from sklearn.metrics import accuracy_score

# 1. Baca dataset
data = pd.read_csv("mahasiswa.csv")

# 2. Fitur (X) dan label (y)
X = data[["UTS", "UAS"]]
y = data["Lulus"]

# 3. Split data: 75% training, 25% testing
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.25, random_state=42)

# 4. Buat model KNN (misalnya k=3)
knn = KNeighborsClassifier(n_neighbors=3)
knn.fit(X_train, y_train)

# 5. Prediksi data testing
y_pred = knn.predict(X_test)

print("Data Testing:")
print(X_test)
print("\nPrediksi Kelulusan:", y_pred.tolist())
print("Jawaban Sebenarnya:", y_test.tolist())
print("Akurasi:", accuracy_score(y_test, y_pred))

# 6. Prediksi data baru
data_baru = pd.DataFrame([[65, 70]], columns=["UTS", "UAS"])
prediksi_baru = knn.predict(data_baru)

print("\nPrediksi mahasiswa baru (UTS=65, UAS=70):", 
      "Lulus" if prediksi_baru[0]==1 else "Tidak Lulus")
