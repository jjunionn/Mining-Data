import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.decomposition import PCA
from sklearn.cluster import KMeans
from google.colab import files

# Upload file manual dari komputer
uploaded = files.upload()

# Baca dataset
df = pd.read_csv("jantung.csv" , sep = ";")
print(df.head())

# Ambil hanya fitur (tanpa label Risiko_Jantung)
X = df[["Usia", "Tekanan_Darah" , "Kolestrol", "Detak_Jantung", "Aktivitas_fisik"]]

# ==== ALGORITMA UNSUPERVISED: KMeans ====
# Misalnya kita minta 2 cluster (risiko tinggi vs rendah, tanpa label asli)
kmeans = KMeans(n_clusters=2, random_state=42, n_init=10)
kmeans.fit(X)

# Ambil hasil cluster
labels = kmeans.labels_

# ==== VISUALISASI DENGAN PCA ====
pca = PCA(n_components=2)
X_pca = pca.fit_transform(X)

plt.figure(figsize=(8,6))
plt.scatter(X_pca[:,0], X_pca[:,1], c=labels, cmap="viridis", edgecolor="k", s=80)
plt.xlabel("PC1")
plt.ylabel("PC2")
plt.title("Clustering KMeans (tanpa label Risiko_Jantung)")
plt.colorbar(label="Cluster")
plt.show()

# Tampilkan label cluster untuk tiap data
df["Cluster"] = labels
print(df.head(10))
